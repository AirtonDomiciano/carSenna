<button
  type="button"
  class="btn btn-lg btn-success"
  (click)="visualizarNotaFiscal()"
  data-bs-toggle="modal"
  data-bs-target="#previewModal"
>
  <i class="bi bi-file-earmark-check"></i> {{ nameButton }}
</button>

<div
  class="modal fade"
  id="previewModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-xl modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Visualização da Nota</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="container my-5 p-5 border nota-fiscal-container">
          <!-- Cabeçalho da Nota -->
          <div class="nota-fiscal-header row align-items-center">
            <div class="col-md-9 text-start">
              <h4 class="mb-0">{{ preview.nomeEmpresa }}</h4>
              <!-- <ng-container *ngIf="preview.mechanical.name"></ng-container> -->
              <h5 *ngIf="preview.mechanical.name">
                {{ preview.mechanical.name }}
              </h5>
            </div>
            <div class="col-md-3 text-start">
              <p class="p-0">CNPJ: {{ preview.CNPJ }}</p>
              <p class="p-0">NIRE: 33-8-0666557-0</p>
            </div>
            <div class="col-md-12 text-center">
              <h5>
                Tel.: {{ preview.telefoneEmpresa }} Cel.:
                {{ preview.telefoneEmpresa }}
              </h5>
            </div>
            <div class="col-md-12 text-start">
              <h6>
                {{ preview.ruaEmpresa }}, {{ preview.numeroEmpresa }} -
                {{ preview.bairroEmpresa }} - Cep {{ preview.cepEmpresa }} -
                {{ preview.cidadeEmpresa }} -{{ preview.estadoEmpresa }}
              </h6>
            </div>
          </div>
          <!-- Informações do Cliente -->
          <div class="row border-top pt-3">
            <div class="col-md-10 text-start">
              <h5>
                <strong>Descrição do Serviço: </strong
                >{{ preview.descricaoServico }}
              </h5>
            </div>
            <div class="col-md-10 text-start">
              <h5>
                <strong>Data da Emissão: </strong
                >{{ preview.dataEmissao | date : "dd/MM/yyyy" }}
              </h5>
            </div>
            <div class="col-md-2 text-end">
              <h4>Nº: 001</h4>
            </div>
            <div class="col-md-8 text-start">
              <h5>
                <strong> Nome ou Firma: </strong> {{ preview.customer.name }}
              </h5>
            </div>
            <div class="col-md-12 text-start">
              <h5><strong>Endereço: </strong></h5>
            </div>
            <div class="col-md-5 text-start">
              <h5><strong> Bairro: </strong></h5>
            </div>
            <div class="col-md-4 text-start">
              <h5><strong> Município: </strong></h5>
            </div>
            <div class="col-md-3 text-start">
              <h5><strong> Fone: </strong></h5>
            </div>
            <div class="col-md-6 text-start">
              <h5><strong> CNPJ/CPF: </strong> {{ preview.customer.cpf }}</h5>
            </div>
            <div class="col-md-6 text-start">
              <h5>
                <strong>Insc. Mun. e/ou Est:</strong> {{ preview.customer.cpf }}
              </h5>
            </div>
          </div>

          <!-- Tabela de Discriminação dos Serviços -->
          <table class="table table-bordered mt-3">
            <thead>
              <tr>
                <th>Quant.</th>
                <th>Discriminação dos Serviços</th>
                <th>P. Unit.</th>
                <th>Total R$</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of itemsNota">
                <td>{{ item.amount }}</td>
                <td>{{ item.description }}</td>
                <td>{{ item.unitPrice }}</td>
                <td>{{ item.value }}</td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <td colspan="3" class="text-end">
                  <strong>Valor Total da Nota R$</strong>
                </td>
                <td>
                  <strong> {{ preview.totalValue }}</strong>
                </td>
              </tr>
            </tfoot>
          </table>

          <!-- Informações do Rodapé -->
          <div class="text-center mt-3">
            <!-- <p>
              Nome, endereço e inscrições estadual e no CNPJ do impressor; o nº
              da AIDF, a data e a quantidade da impressão; o nº de ordem do 1º e
              do último documento impresso e a sua série e subsérie.
            </p> -->
            <p>
              Data limite para utilização do documento fiscal (quando exigida).
            </p>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
          Fechar
        </button>
        <button
          type="button"
          class="btn btn-success"
          (click)="downloadNotaFiscal()"
        >
          Download
        </button>
      </div>
    </div>
  </div>
</div>
